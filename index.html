<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureChat - Encrypted Messaging</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    <script src="firebase-config.js"></script>
</head>
<body>
    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-container">
            <span class="close-btn" id="closeAuth">&times;</span>
            
            <div class="auth-tabs">
                <button class="tab-btn active" id="loginTab">Login</button>
                <button class="tab-btn" id="registerTab">Register</button>
            </div>
            
            <div class="auth-content">
                <!-- Login Form -->
                <form id="loginForm" class="auth-form active">
                    <div class="input-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="input-group">
                        <label for="loginPassword">Password</label>
                        <div class="password-wrapper">
                            <input type="password" id="loginPassword" required>
                            <i class="fas fa-eye-slash toggle-password"></i>
                        </div>
                    </div>
                    <button type="submit" class="auth-btn">Login</button>
                    <div class="auth-footer">
                        <a href="#" id="forgotPassword">Forgot password?</a>
                    </div>
                </form>
                
                <!-- Register Form -->
                <form id="registerForm" class="auth-form">
                    <div class="input-group">
                        <label for="registerUsername">Username</label>
                        <input type="text" id="registerUsername" placeholder="@username" required>
                    </div>
                    <div class="input-group">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="input-group">
                        <label for="registerPassword">Password</label>
                        <div class="password-wrapper">
                            <input type="password" id="registerPassword" required>
                            <i class="fas fa-eye-slash toggle-password"></i>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="registerConfirmPassword">Confirm Password</label>
                        <div class="password-wrapper">
                            <input type="password" id="registerConfirmPassword" required>
                            <i class="fas fa-eye-slash toggle-password"></i>
                        </div>
                    </div>
                    <button type="submit" class="auth-btn">Register</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Main App Container (hidden until auth) -->
    <div class="app-container" id="appContainer">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="user-profile">
                    <img src="https://via.placeholder.com/50" alt="Profile" id="userAvatar">
                    <div class="user-info">
                        <span id="usernameDisplay"></span>
                        <small id="userStatus">Online</small>
                    </div>
                </div>
                <button id="logoutBtn" class="icon-btn"><i class="fas fa-sign-out-alt"></i></button>
            </div>
            
            <div class="sidebar-tabs">
                <button class="tab-btn active" data-tab="chats"><i class="fas fa-comment-dots"></i> Chats</button>
                <button class="tab-btn" data-tab="friends"><i class="fas fa-user-friends"></i> Friends</button>
                <button class="tab-btn" data-tab="groups"><i class="fas fa-users"></i> Groups</button>
                <button class="tab-btn" data-tab="profile"><i class="fas fa-user-cog"></i> Profile</button>
            </div>
            
            <div class="search-box">
                <input type="text" placeholder="Search..." id="globalSearch">
                <button class="search-btn"><i class="fas fa-search"></i></button>
            </div>
            
            <div class="sidebar-content">
                <!-- Chats Tab -->
                <div class="tab-content active" id="chatsTab">
                    <div class="chat-list" id="chatList">
                        <!-- Chats will be populated here -->
                    </div>
                </div>
                
                <!-- Friends Tab -->
                <div class="tab-content" id="friendsTab">
                    <div class="friends-header">
                        <h3>Friends</h3>
                        <button id="addFriendBtn" class="icon-btn"><i class="fas fa-user-plus"></i></button>
                    </div>
                    <div class="friends-list" id="friendsList">
                        <!-- Friends will be populated here -->
                    </div>
                </div>
                
                <!-- Groups Tab -->
                <div class="tab-content" id="groupsTab">
                    <div class="groups-header">
                        <h3>Groups</h3>
                        <button id="createGroupBtn" class="icon-btn"><i class="fas fa-plus-circle"></i></button>
                    </div>
                    <div class="groups-list" id="groupsList">
                        <!-- Groups will be populated here -->
                    </div>
                </div>
                
                <!-- Profile Tab -->
                <div class="tab-content" id="profileTab">
                    <div class="profile-view">
                        <div class="profile-avatar">
                            <img src="https://via.placeholder.com/150" alt="Profile" id="profileAvatar">
                            <button id="changeAvatarBtn" class="icon-btn"><i class="fas fa-camera"></i></button>
                            <input type="file" id="avatarUpload" accept="image/*" style="display: none;">
                        </div>
                        <div class="profile-info">
                            <h3 id="profileUsername"></h3>
                            <p class="last-seen" id="profileLastSeen"></p>
                            <div class="profile-bio">
                                <textarea id="profileBio" placeholder="Write something about yourself..."></textarea>
                                <button id="saveBioBtn" class="small-btn">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Chat Area -->
        <div class="chat-area">
            <div class="chat-header" id="chatHeader">
                <div class="chat-info">
                    <img src="https://via.placeholder.com/40" alt="Chat" id="currentChatAvatar">
                    <div>
                        <h3 id="currentChatName">Select a chat</h3>
                        <small id="currentChatStatus"></small>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="icon-btn" id="chatInfoBtn"><i class="fas fa-info-circle"></i></button>
                    <button class="icon-btn" id="encryptBtn"><i class="fas fa-lock"></i></button>
                </div>
            </div>
            
            <div class="messages-container" id="messagesContainer">
                <div class="no-chat-selected">
                    <i class="fas fa-comments"></i>
                    <p>Select a chat to start messaging</p>
                </div>
            </div>
            
            <div class="message-input">
                <input type="text" placeholder="Type a message..." id="messageInput" disabled>
                <button id="sendMessageBtn" disabled><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
        
        <!-- Right Sidebar (Chat Info) -->
        <div class="right-sidebar" id="rightSidebar">
            <div class="sidebar-header">
                <h3>Chat Info</h3>
                <button class="close-btn" id="closeSidebar">&times;</button>
            </div>
            
            <div class="chat-details" id="chatDetails">
                <!-- Chat details will be populated here -->
            </div>
        </div>
        
        <!-- Modals -->
        <div class="modal" id="addFriendModal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <h3>Add Friend</h3>
                <div class="search-box">
                    <input type="text" placeholder="Search by username..." id="friendSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
                <div class="search-results" id="friendSearchResults">
                    <!-- Search results will appear here -->
                </div>
            </div>
        </div>
        
        <div class="modal" id="createGroupModal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <h3>Create Group</h3>
                <div class="input-group">
                    <label for="groupName">Group Name</label>
                    <input type="text" id="groupName" required>
                </div>
                <div class="input-group">
                    <label>Add Members</label>
                    <div class="search-box">
                        <input type="text" placeholder="Search friends..." id="groupMemberSearch">
                        <button class="search-btn"><i class="fas fa-search"></i></button>
                    </div>
                    <div class="selected-members" id="selectedMembers">
                        <!-- Selected members will appear here -->
                    </div>
                </div>
                <button id="createGroupSubmit" class="modal-btn">Create Group</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
